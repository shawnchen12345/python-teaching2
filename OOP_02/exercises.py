# ===================================================================
# OOP 第2课：封装与进阶特性 —— 课堂练习
# ===================================================================
# 完成以下练习，巩固封装、property、类方法/静态方法、魔术方法
# 答案在 solutions.py 中
# ===================================================================


# -------------------------------------------------------------------
# 练习 1: 安全的用户账户 (封装 + Property)
# 定义一个 UserAccount 类：
#   属性:
#     - username (公开)
#     - _email (内部)
#     - __password (私有)
#   Property:
#     - email: getter 返回邮箱，setter 验证必须包含 "@"
#     - password: 只有 setter（可以设置新密码，最少6位），没有 getter
#   方法:
#     - verify_password(pwd): 验证密码是否正确，返回 True/False
#     - __str__(): 返回 "用户: xx (邮箱: xx)"
# -------------------------------------------------------------------
print("=== 练习 1: 安全的用户账户 ===")
# 在这里写代码:




# -------------------------------------------------------------------
# 练习 2: 商品与购物车 (类属性 + 类方法)
# 定义一个 Product 类：
#   类属性: discount_rate = 1.0 (折扣率, 1.0 表示不打折)
#   属性: name, price
#   Property:
#     - final_price: 只读，返回 price * discount_rate
#   类方法:
#     - set_discount(rate): 设置折扣率 (0 < rate <= 1.0)
#   静态方法:
#     - format_price(price): 返回格式化的价格字符串 "¥xx.xx"
#   魔术方法:
#     - __str__(): 返回 "商品名 - ¥原价 (折后: ¥折后价)"
#
# 定义一个 ShoppingCart 类：
#   属性: items (列表，存 (Product, 数量) 元组)
#   方法:
#     - add_item(product, quantity=1): 添加商品
#     - get_total(): 计算总价 (用 final_price)
#     - __len__(): 返回商品种类数
#     - __str__(): 返回购物车摘要
# -------------------------------------------------------------------
print("\n=== 练习 2: 商品与购物车 ===")
# 在这里写代码:




# -------------------------------------------------------------------
# 练习 3: 自定义分数类 (魔术方法)
# 定义一个 Fraction 类，表示分数 (如 3/4)：
#   属性: numerator(分子), denominator(分母)
#   初始化时自动约分 (用辗转相除法求最大公约数)
#   魔术方法:
#     - __add__(other): 分数加法
#     - __sub__(other): 分数减法
#     - __mul__(other): 分数乘法
#     - __eq__(other): 判等 (约分后比较)
#     - __lt__(other): 比较大小
#     - __str__(): 返回 "分子/分母"，如果分母为1则只显示分子
#     - __float__(): 支持 float(fraction) 转换
#
#   提示: 辗转相除法
#     def gcd(a, b):
#         while b: a, b = b, a % b
#         return a
# -------------------------------------------------------------------
print("\n=== 练习 3: 自定义分数类 ===")
# 在这里写代码:




# -------------------------------------------------------------------
# 练习 4: 日志记录器 (类方法 + 类属性)
# 定义一个 Logger 类：
#   类属性:
#     - _instance = None (用于存储唯一实例)
#     - _logs = [] (所有日志)
#     - _level_priority = {"DEBUG": 0, "INFO": 1, "WARNING": 2, "ERROR": 3}
#     - min_level = "DEBUG" (最低记录级别)
#   类方法:
#     - get_instance(): 如果 _instance 为 None，创建一个新的；否则返回已有的
#       (这就是"单例模式"的简单实现)
#     - set_level(level): 设置最低日志级别
#   实例方法:
#     - log(level, message): 如果 level >= min_level，记录日志
#       格式: "[级别] 消息"
#     - show_logs(): 打印所有日志
#     - clear(): 清空日志
# -------------------------------------------------------------------
print("\n=== 练习 4: 日志记录器 ===")
# 在这里写代码:




# -------------------------------------------------------------------
# [挑战题] 练习 5: 自定义列表 (容器魔术方法)
# 定义一个 SmartList 类，实现一个增强版列表：
#   内部用 self._data = [] 存储数据
#   支持的操作:
#     - __len__(): 长度
#     - __getitem__(index): 索引访问 (支持负数索引)
#     - __setitem__(index, value): 索引赋值
#     - __contains__(item): in 运算符
#     - __add__(other): + 合并两个 SmartList
#     - __mul__(n): * 重复
#     - __str__(): 打印
#     - __iter__(): 迭代 (for 循环)
#   额外方法:
#     - append(item): 添加元素
#     - map(func): 对每个元素应用函数，返回新 SmartList
#     - filter(func): 过滤元素，返回新 SmartList
#     - reduce(func, initial=0): 归约操作
# -------------------------------------------------------------------
print("\n=== 挑战题: 自定义列表 ===")
# 在这里写代码:

