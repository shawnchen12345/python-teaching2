# Day 3 随堂练习 - 参考答案与详细解析
# 本文件与 class_exercises.py 一一对应

# ===========================================================
# 随堂练习 1：定义和调用函数
# 对应讲义 1.4 节
# ===========================================================

print("=" * 50)
print("随堂练习 1：定义和调用函数")
print("=" * 50)

# 练习 1.1: 打印分割线
def print_line():
    print("-" * 20)

print_line()
print_line()

# 【解析】
# - def 关键字用于定义函数
# - 函数名后面的括号 () 不能省略
# - 函数体必须缩进（通常4个空格）
# - "-" * 20 利用了字符串乘法，快速生成20个连字符

print("\n" + "-" * 30 + "\n")

# 练习 1.2: 欢迎语
def welcome():
    print("欢迎来到Python世界!")
    print("今天我们学习函数")
    print("加油!")

welcome()

# 【解析】
# - 一个函数可以包含多行代码
# - 定义函数后必须调用才会执行


# ===========================================================
# 随堂练习 2：参数传递
# 对应讲义 2.4 节
# ===========================================================

print("\n" + "=" * 50)
print("随堂练习 2：参数传递")
print("=" * 50)

# 练习 2.1: 矩形面积
def area(width, height):
    result = width * height
    print(f"面积是: {result}")

area(10, 5)

# 【解析】
# - width 和 height 是形参（形式参数）
# - 10 和 5 是实参（实际参数）
# - 调用时参数顺序必须和定义时一致

print("\n" + "-" * 30 + "\n")

# 练习 2.2: 学生信息（带默认参数）
def student_info(name, grade="一年级"):
    print(f"{name} 是{grade}的学生")

student_info("小明")           # 使用默认值
student_info("小红", "二年级")  # 覆盖默认值

# 【解析】
# - grade="一年级" 设置了默认值
# - 调用时如果不传 grade，就用默认值
# - 默认参数必须放在非默认参数后面

print("\n" + "-" * 30 + "\n")

# 练习 2.3: 简易计算器
def calc(a, b, op):
    if op == "+":
        print(f"{a} {op} {b} = {a + b}")
    elif op == "-":
        print(f"{a} {op} {b} = {a - b}")
    elif op == "*":
        print(f"{a} {op} {b} = {a * b}")
    else:
        print("不支持的运算符")

calc(10, 3, "+")
calc(10, 3, "-")
calc(10, 3, "*")

# 【解析】
# - 注意：这里我们修改了写法，直接在 if 里打印结果
# - 避免了 return 导致的提前退出问题


# ===========================================================
# 随堂练习 3：返回值
# 对应讲义 3.4 节
# ===========================================================

print("\n" + "=" * 50)
print("随堂练习 3：返回值")
print("=" * 50)

# 练习 3.1: 返回较大值
def max_of_two(a, b):
    if a > b:
        return a
    else:
        return b

# 更简洁的写法（三元表达式）:
# def max_of_two(a, b):
#     return a if a > b else b

print(f"max_of_two(10, 20) = {max_of_two(10, 20)}")

# 【解析】
# - return 把结果返回给调用者
# - 返回值可以赋值给变量，也可以直接用于打印或计算
# - print 只是显示，不能被程序继续使用

print("\n" + "-" * 30 + "\n")

# 练习 3.2: 圆面积
def circle_area(r):
    pi = 3.14
    return pi * r * r

print(f"半径5的圆面积: {circle_area(5)}")

# 【解析】
# - 公式: 面积 = π × r²
# - 在 Python 中 r * r 就是 r 的平方（也可以写成 r ** 2）

print("\n" + "-" * 30 + "\n")

# 练习 3.3: 交换两个值
def swap(a, b):
    return b, a

x, y = swap(10, 20)
print(f"交换后: x={x}, y={y}")

# 【解析】
# - Python 允许返回多个值，本质是返回一个元组
# - x, y = swap(10, 20) 这种写法叫"解包"


# ===========================================================
# 随堂练习 4：作用域
# 对应讲义 4.4 节
# ===========================================================

print("\n" + "=" * 50)
print("随堂练习 4：作用域")
print("=" * 50)

x = 10

def func():
    x = 5  # 这是局部变量，不是修改全局的 x
    print(f"函数内 x = {x}")

func()
print(f"函数外 x = {x}")

# 【答案】
# 函数内 x = 5
# 函数外 x = 10

# 【解析】
# - 函数内的 x = 5 创建了一个新的局部变量
# - 这个局部变量"遮蔽"了全局的 x，但不会修改它
# - 函数执行完后，局部变量消失
# - 全局的 x 始终是 10


# ===========================================================
# 随堂练习 5：进阶技巧
# 对应讲义 5.4 节
# ===========================================================

print("\n" + "=" * 50)
print("随堂练习 5：进阶技巧")
print("=" * 50)

# 练习 5.1: 不定长参数求和
def my_sum(*nums):
    total = 0
    for n in nums:
        total += n
    return total

# 也可以直接用内置的 sum(): return sum(nums)

print(f"my_sum(1, 2, 3) = {my_sum(1, 2, 3)}")
print(f"my_sum(10, 20, 30, 40) = {my_sum(10, 20, 30, 40)}")

# 【解析】
# - *nums 接收任意数量的位置参数，打包成元组
# - 使用 for 循环遍历元组，累加求和

print("\n" + "-" * 30 + "\n")

# 练习 5.2: 不定长关键字参数
def build_profile(name, **info):
    print(f"用户: {name}")
    for key, value in info.items():
        print(f"  - {key}: {value}")

build_profile("Alice", age=18, city="Beijing")

# 【解析】
# - **info 接收任意数量的关键字参数，打包成字典
# - 使用 .items() 遍历字典的键值对


# ===========================================================
# 随堂练习 6：递归
# 对应讲义 6.3 节
# ===========================================================

print("\n" + "=" * 50)
print("随堂练习 6：递归")
print("=" * 50)

# 练习 6.1: 递归求和
def sum_to_n(n):
    # 终止条件
    if n == 1:
        return 1
    # 递归调用
    return n + sum_to_n(n - 1)

print(f"sum_to_n(5) = {sum_to_n(5)}")    # 1+2+3+4+5 = 15
print(f"sum_to_n(100) = {sum_to_n(100)}")  # 5050

# 【解析】
# 递归必须有终止条件! 否则会无限循环导致程序崩溃。
# sum_to_n(5) = 5 + sum_to_n(4)

print("\n" + "-" * 30 + "\n")

# 练习 6.2: 递归倒计时
def countdown(n):
    if n == 0:
        print("发射！")
        return
    print(n)
    countdown(n - 1)

countdown(3)

# 【解析】
# - if n == 0 是基线条件（停止点）
# - 每次调用 n 都会减 1，直到变成 0

print("\n" + "-" * 30 + "\n")

# 练习 6.3: 递归阶乘
def factorial(n):
    if n == 1:
        return 1
    return n * factorial(n - 1)

print(f"5! = {factorial(5)}")

# 【解析】
# - 阶乘公式: n! = n * (n-1)!
# - 5! = 5 * 4 * 3 * 2 * 1 = 120


print("\n" + "=" * 50)
print("所有练习答案演示完毕！")
print("=" * 50)
